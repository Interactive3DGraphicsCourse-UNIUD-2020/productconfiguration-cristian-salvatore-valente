<!DOCTYPE html>
<html>
<head>
  <style>

  body {
    font-family: Monospace;
    margin: 0px;
    overflow: hidden;
    /*background-color: #996000;*/
  }

  canvas {
    width: 100%;
    height: 100%;
  }

  #menu {
				position: absolute;
				bottom: 20px;
				width: 100%;
				padding: 10px;
				box-sizing: border-box;
				text-align: center;
			}

			button {
				color: rgb(255,255,255);
				background: rgb(255,255,255,0.1);
				border: 0px;
				padding: 5px 10px;
				margin: 2px;
				font-size: 14px;
				cursor: pointer;
			}

		  button:hover {
					background-color: rgba(0,255,255,0.5);
				}

  </style>

  <script src="lib/three.min.js"></script>
  <script src="lib/stats.min.js"></script>
  <script src="lib/OBJLoader.js"></script>
  <script src="lib/OrbitControls.js"></script>
</head>
<body>

  <div id="menu"></div>

  <script  type="module">
  var scene, camera, renderer, controls, stats;
  var menu = document.getElementById( "menu" );
  var objects = [];
  var Mesh = ["DoubleBlades.obj","Katana.obj","LeviatanAxe.obj","SwordSting.obj"];
  var current;

  var BUTTONS = {
    "back":"Back",
    "heart":"AddPrefer",
    "shopping-cart": "AddToCart",
    "like": "AddLike",
    "rotate-right": "RotateLeft",
    "maxifying-glass":"Zoom",
    "change": "changeTexture",
    "minifying-glass": "BackZoom",
    "rotate-left": "RotateRight",
    "light-bulb-1":"Set1Light",
    "light-bulb-2":"Set2Light",
    "light-bulb-3":"Set3Light",
    "share": "Share",
    "next":"Next"
  };

  function Start() {



    current = 0;
    

    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 10000 );



    renderer = new THREE.WebGLRenderer( {antialias: true} );
    renderer.setSize( window.innerWidth, window.innerHeight );

    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.gammaInput = true;
    renderer.gammaOutput = true;
    renderer.shadowMap.enabled = true;
    document.body.appendChild( renderer.domElement );

    stats = new Stats();
    stats.domElement.style.position = 'absolute';
    stats.domElement.style.top = '0px';
    document.body.appendChild( stats.domElement );

    controls = new THREE.OrbitControls( camera, renderer.domElement );

  camera.position.z+= 20;




  createMenu();







}

function createMenu() {

				for ( var i in BUTTONS ) {

					var button = document.createElement( 'button' );

          button.setAttribute("id",BUTTONS[i]);
					button.innerHTML = '<img src="Icons/'+i+'.png" style="width:30px;height:30px;" >';
					menu.appendChild( button );
          button.addEventListener('click',buttonCallback(BUTTONS[i]),false);
        }
      }




function buttonCallback(value) {
  if(value=="Zoom"){

    return function () {
      for ( var i = 0; i < objects.length; i ++ ) {
        var object = objects[ i ];

        object.remove( object );
        scene.remove( object );
      }}

  }else if(value=="BackZoom"){
  }else if(value=="RotateRight"){
  }else if(value=="RotateLeft"){
  }else if(value=="AddLike"){
  }else if(value=="AddPrefer"){
  }else if(value=="Set2Light"){
  }else if(value=="Set3Light"){
  }else if(value=="Set1Light"){
  }else if(value=="Back"){

    return function(){

      if(current==0){
        current=3;
      }else{
        current--; };

        for ( var i = 0; i < objects.length; i ++ ) {
          var object = objects[ i ];

          object.remove( object );
          scene.remove( object );
        };

      var pointer = Mesh[current];

      var loader = new THREE.OBJLoader();

      loader.load("Objects/"+pointer,function(obj){

            obj.children.forEach(writeGeometry);

            function writeGeometry(children){
              var geometry = children.geometry;
              var shaderMat = new THREE.MeshBasicMaterial();
              var mesh = new THREE.Mesh( geometry, shaderMat );

              objects.push(mesh);
              scene.add( mesh );}
      });



    };

  }else if(value=="Next"){

    return function(){

      if(current==3){
        current=0;
      }else{
        current++; };


        for ( var i = 0; i < objects.length; i ++ ) {
          var object = objects[ i ];

          object.remove( object );
          scene.remove( object );
        };

      var pointer = Mesh[current];

      var loader = new THREE.OBJLoader();

      loader.load("Objects/"+pointer,function(obj){

            obj.children.forEach(writeGeometry);

            function writeGeometry(children){
              var geometry = children.geometry;
              var shaderMat = new THREE.MeshBasicMaterial();
              var mesh = new THREE.Mesh( geometry, shaderMat );

              objects.push(mesh);
              scene.add( mesh );}
      });


    };

  }else if(value=="Share"){
  }else if(value=="AddToCart"){
  }else if(value=="changeTexture"){
     }


  }









  function Animate() {
			requestAnimationFrame( Animate );
			renderer.render( scene, camera );
			stats.update();
			controls.update();
    	}

	Start();
	Animate();

  </script>
</body>
</html>
